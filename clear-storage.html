<!DOCTYPE html>
<html>
<head>
    <title>Clear Local Storage</title>
</head>
<body>
    <h1>Clear Application Storage</h1>
    <button onclick="clearStorage()">Clear All Local Storage</button>
    <div id="result"></div>
    
    <script>
        function clearStorage() {
            try {
                // Clear all localStorage
                localStorage.clear();
                
                // Clear specific keys that might be cached
                const keysToRemove = [
                    'token', 'role', 'userName', 'studentId', 'section', 
                    'OPENAI_API_KEY', 'auth', 'user'
                ];
                
                keysToRemove.forEach(key => {
                    localStorage.removeItem(key);
                    sessionStorage.removeItem(key);
                });
                
                document.getElementById('result').innerHTML = 
                    '<p style="color: green;">✅ Local storage cleared successfully!</p>' +
                    '<p>You can now close this tab and refresh your application.</p>';
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<p style="color: red;">❌ Error clearing storage: ' + error.message + '</p>';
            }
        }
        
        // Show current storage contents
        window.onload = function() {
            const currentStorage = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                currentStorage.push(key + ': ' + localStorage.getItem(key));
            }
            
            if (currentStorage.length > 0) {
                document.getElementById('result').innerHTML = 
                    '<h3>Current Local Storage:</h3><ul>' +
                    currentStorage.map(item => '<li>' + item + '</li>').join('') +
                    '</ul>';
            } else {
                document.getElementById('result').innerHTML = 
                    '<p>No data in local storage.</p>';
            }
        };
    </script>
</body>
</html>
